<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Manager Login</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <h2 class="mb-4 text-center">Manager Login</h2>
        <form id="loginForm">
          <div class="mb-3"><label for="email" class="form-label">Email</label><input type="email" class="form-control" id="email" required></div>
          <div class="mb-3"><label for="password" class="form-label">Password</label><input type="password" class="form-control" id="password" required></div>
          <button type="button" onclick="requestCode()" class="btn btn-primary w-100">Login</button>
        </form>
        <div id="codeSection" class="mt-4" style="display:none;">
          <div class="mb-3"><label for="code" class="form-label">2FA Code</label><input type="text" class="form-control" id="code"></div>
          <button class="btn btn-success w-100" onclick="verifyCode()">Verify Code</button>
        </div>
      </div>
    </div>
  </div>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script>
    let tempToken=''; async function requestCode(){const email=document.getElementById('email').value;const password=document.getElementById('password').value;const res=await fetch('/api/account/admin-login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(res.ok){tempToken=data.tempToken;document.getElementById('codeSection').style.display='block';}else alert('Login failed');} async function	verifyCode(){const code=document.getElementById('code').value;const res=await fetch('/api/account/verify-2fa',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+tempToken},body:JSON.stringify({code})});const data=await res.json();if(res.ok){localStorage.setItem('adminToken',data.token);window.location.href='dashboard.html';}else alert('Invalid code');}
  </script>
</body>
</html>